language: ruby
rvm:
  - 2.5
  - 2.6
  - ruby-head

gemfile:
  - gemfiles/rails4_2.gemfile
  - gemfiles/rails5_0.gemfile
  - gemfiles/rails5_1.gemfile
  - gemfiles/rails5_2.gemfile

script: bin/test

matrix:
  allow_failures:
    - rvm: ruby-head
before_install:
  - gem install bundler --no-document	  - travis_retry gem update --system || travis_retry gem update --system 2.7.8
  - travis_retry gem install bundler --no-document || travis_retry gem install bundler --no-document -v 1.17.3